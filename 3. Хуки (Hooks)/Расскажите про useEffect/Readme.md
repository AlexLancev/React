### **Объяснение**

**useEffect** — хук для выполнения побочных эффектов в функциональных компонентах (запросы данных, подписки, ручное изменение DOM).

```jsx
useEffect(() => {
  // Побочный эффект
  return () => {
    // Очистка эффекта
  };
}, [dependencies]); // Массив зависимостей
```

---

### **Три варианта использования**

#### **1. При каждом рендере**
```jsx
useEffect(() => {
  console.log('Выполняется при каждом рендере');
}); // Без массива зависимостей
```

#### **2. Только при монтировании**
```jsx
useEffect(() => {
  console.log('Выполняется один раз при монтировании');
  return () => {
    console.log('Очистка при размонтировании');
  };
}, []); // Пустой массив
```

#### **3. При изменении зависимостей**
```jsx
useEffect(() => {
  console.log('Выполняется при изменении count:', count);
}, [count]); // Зависит от count
```

---

### **Примеры**

#### **Запрос данных**
```jsx
function User({ userId }) {
  const [user, setUser] = useState(null);
  
  useEffect(() => {
    fetch(`/api/users/${userId}`)
      .then(res => res.json())
      .then(setUser);
  }, [userId]); // Повторяет при изменении userId
}
```

#### **Подписка на события**
```jsx
function WindowSize() {
  const [size, setSize] = useState(window.innerWidth);
  
  useEffect(() => {
    const handleResize = () => setSize(window.innerWidth);
    window.addEventListener('resize', handleResize);
    
    return () => {
      window.removeEventListener('resize', handleResize);
    };
  }, []); // Один раз при монтировании
}
```

#### **Управление заголовком**
```jsx
function DocumentTitle({ title }) {
  useEffect(() => {
    document.title = title;
  }, [title]); // При изменении title
}
```

---

### **Распространённые ошибки**

#### **Бесконечный цикл**
```jsx
// ❌ Бесконечный цикл
const [count, setCount] = useState(0);
useEffect(() => {
  setCount(count + 1); // Вызывает рендер → эффект → рендер...
}); // Без зависимостей

// ✅ Исправлено
useEffect(() => {
  // Логика без изменения зависимостей
}, []); // Или с правильными зависимостями
```

#### **Забытая очистка**
```jsx
// ❌ Утечка памяти
useEffect(() => {
  const interval = setInterval(() => {}, 1000);
  // Нет очистки
}, []);

// ✅ С очисткой
useEffect(() => {
  const interval = setInterval(() => {}, 1000);
  return () => clearInterval(interval);
}, []);
```

---

### **Резюме**

**useEffect** — хук для побочных эффектов, заменяет `componentDidMount`, `componentDidUpdate`, `componentWillUnmount`.

**Ключевые нюансы:**
1. **Три режима работы:** Без массива (каждый рендер), пустой массив (монтирование), с зависимостями (при их изменении)
2. **Возврат функции:** Для очистки (отписки, таймеры, удаление слушателей)
3. **Зависимости:** Если эффект использует значения из области видимости, они должны быть в массиве зависимостей

**Как сказать своими словами:**
«useEffect — это хук для побочных действий: запросы к API, подписки, изменение DOM. Принимает функцию-эффект и массив зависимостей. Если зависимости меняются — эффект выполняется заново. Возвращаемая функция выполняется перед следующим эффектом или размонтированием для очистки.»